<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.24/css/jquery.dataTables.css">
<script src = "http://cdn.datatables.net/1.10.18/js/jquery.dataTables.min.js" defer ></script>

<section class="content">
    <div class="container-fluid">
        <div class="row">
            <div class="col-12">
                <div class="card mt-3">
                    <div class="card-header">
                        <h3 class="card-title caption-lh">Quản lý người dùng</h3>
                        <button type="button" class="btn btn-primary float-right" onclick="javascript: redirect('/admin/users/create');">Thêm mới</button>
                    </div>
                    <!-- /.card-header -->
                    <div class="card-body">
                        <table id="user_table" class="table table-striped table-bordered" style="width:100%">
                            <thead>
                                <tr>
                                    <th>STT</th>
                                    <th>Avatar</th>
                                    <th>Họ tên</th>
                                    <th>Tên đăng nhập</th>
                                    <th>Điện thoại</th>
                                    <th>Khởi tạo</th>
                                    <th>Cập nhật</th>
                                    <th>Trạng thái</th>
                                    <th class="no-sort">Thao tác</th>
                                </tr>
                            </thead>
                            <tbody>
                                {{#each Users}}
                                <tr>
                                    <td style="text-align: center;">{{inc @key}}</td>
                                    <td style="text-align: center;"><img src="../{{this.avatar}}" width="30" height="30"></td>
                                    <td>{{this.fullname}}</td>
                                    <td>{{this.username}}</td>
                                    <td>{{this.phone}}</td>
                                    <td>{{moment date=this.createdAt format="DD/MM/YYYY"}}</td>
                                    <td>{{moment date=this.modifiedAt format="DD/MM/YYYY"}}</td>
                                    <td>{{#if this.status}}Kích hoạt{{else}}Khóa{{/if}}</td>
                                    <td>
                                        <a href="users/edit/{{this._id}}" class="list-action-icon"><i class="nav-icon fas fa-pencil-alt"></i></a>
                                        <a href="javascript: remove_confirm('users','{{this._id}}')" class="list-action-icon" id="user_delete_{{this._id}}"><i class="nav-icon fas fa-trash"></i></a>
                                        {{#ifCond this.status 1}}
                                        <a href="users/inactive/{{this._id}}" class="list-action-icon"><i class="nav-icon fas fa-lock"></i></a>
                                        {{else}}
                                        <a href="users/active/{{this._id}}" class="list-action-icon"><i class="nav-icon fas fa-unlock"></i></a>
                                        {{/ifCond}}
                                    </td>
                                </tr>
                                {{/each}}
                            </tbody>
                            <tfoot>
                                <tr>
                                    <th>STT</th>
                                    <th>Avatar</th>
                                    <th>Họ tên</th>
                                    <th>Tên đăng nhập</th>
                                    <th>Điện thoại</th>
                                    <th>Khởi tạo</th>
                                    <th>Cập nhật</th>
                                    <th>Trạng thái</th>
                                    <th>Thao tác</th>
                                </tr>
                            </tfoot>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<div style="display: none;" id="dialog-confirm" title="Xóa thông tin người dùng">
    <p><span class="ui-icon ui-icon-alert" style="float:left; margin:3px 12px 5px 0;"></span>Bạn có chắc muốn xóa bản ghi này?</p>
</div>
<script>
    //delete_confirmation('users/delete/{{this._id}}')
    window.onload = function() {
        $('#user_table').DataTable({
            "language": {
                "lengthMenu": "Hiển thị _MENU_ Bản ghi/Trang",
                "zeroRecords": "Không tìm thấy dữ liệu",
                "info": "Trang _PAGE_/_PAGES_",
                "infoEmpty": "Dữ liệu rỗng",
                "infoFiltered": "(filtered from _MAX_ total records)",
                "search": "Tìm kiếm",
                "oPaginate": {sFirst:"Trang đầu",sLast:"Trang cuối",sNext:"Trang sau",sPrevious:"Trang trước"}
            },
            columnDefs: [
                { targets: 'no-sort', orderable: false }
            ]
        });
    }
    
</script>